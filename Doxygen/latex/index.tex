\hyperlink{namespacelib_c_z_i}{lib\+C\+ZI} is a library intended for providing read-\/only access to the information contained in C\+Z\+I-\/documents.

It features
\begin{DoxyItemize}
\item reading subblocks and get the content as a bitmap
\item reading subblocks which are compressed with J\+P\+E\+G-\/\+XR
\item works with tiled images and pyramid images
\item composing multi-\/channel images with tinting and applying a gradation curve
\item access metadata
\end{DoxyItemize}

In a nutshell, it offers (almost...) the same functionality as the 2\+D-\/viewer in Z\+EN -\/ in terms of composing the image (including display-\/settings) and managing the data found in a C\+Z\+I-\/file.


\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{ZEN_screenshot_1.PNG}
\doxyfigcaption{Z\+EN -\/ 2\+D-\/viewer}
\end{DoxyImage}
 The code is written in C++11 and (so far) has been successfully compiled with
\begin{DoxyItemize}
\item Visual Studio 2015 (Microsoft C++ v. 19.\+00.\+23506)
\item G\+CC 5.\+2.\+1 (on Ubuntu Linux 4.\+2.\+0)
\item Clang 3.\+4.\+1 (on Free\+B\+SD 10.\+2)
\end{DoxyItemize}

It is intended to be easily portable to other platforms.

It aims to be thread-\/safe (by most \href{https://en.wikipedia.org/wiki/Thread_safety}{\tt definitions}) -\/ which isn\textquotesingle{}t too surprising since it only allows read-\/only functionality. The library itself does not leverage multithreading, but it is designed for being used in a multithreaded environment.

\section*{C\+ZI in a nutshell }

Conceptionally a C\+Z\+I-\/document can be described as a set of blobs (or blocks -\/ in this context just a binary data structure defined only by its length), which are linked by a directory structure.


\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{CZI_1.PNG}
\doxyfigcaption{C\+ZI -\/ conceptual overview}
\end{DoxyImage}
 At the start of the file, there is a distinguished data-\/structure (\char`\"{}the header\char`\"{}) which (amongst other things) contains the offsets of three other special blocks\+:


\begin{DoxyItemize}
\item the metadata block (contains all \char`\"{}per document\char`\"{} metadata in X\+M\+L-\/format)
\item sub-\/block directory (contains a list of all sub-\/blocks contained in the document and their respective position in the file)
\item the attachment directory (contains a list of all attachment-\/blocks contained in the document and their respective position in the file)
\end{DoxyItemize}

With the term {\itshape sub-\/block} we are referring to an entity which contains a 2-\/dimensional image (or \char`\"{}a bitmap\char`\"{}), some associated metadata in X\+M\+L-\/format (which we refer to as {\itshape sub-\/block metadata}) and (potentially) some other binary attachment (referred to as {\itshape sub-\/block attachment}).~\newline
Do not confuse the terms \char`\"{}sub-\/block metadata\char`\"{}↔\char`\"{}metadata\char`\"{} and \char`\"{}sub-\/block attachment\char`\"{}↔\char`\"{}attachment\char`\"{} in this regard. Sub-\/blocks are identified by something like a coordinate -\/ a list of dimensions and for each dimension a value.

Attachments can contain any sort of binary data (their content is not further defined on the file-\/format level). They are identified by a string. A naming convention is used to discover their content.

The identifier (or coordinate) of a sub-\/block can be grouped in two categories\+: a number of abstract dimensions (abstract in the sense that the number is not directly related to a spatial point) and an X-\/\+Y-\/coordinate in a 2\+D-\/plane. Examples for the former are \char`\"{}\+C-\/dimension\char`\"{} (used for different channels) or \char`\"{}\+T-\/dimensions\char`\"{} (used for images acquired at different points in time) → \hyperlink{namespacelib_c_z_i_a55049658acf59d0eddfaebcad16df424}{cf. Dimension\+Index}. The X-\/\+Y-\/coordinate refer to a common (to all sub-\/blocks) coordinate system in which the sub-\/blocks are thought to be arranged. In fact -\/ sub-\/blocks are not only described by their X-\/\+Y-\/coordinate, but by a complete rectangle (adding witdth and height to the X-\/\+Y-\/coordinate) -\/ called the {\itshape logical rect}. And, in addition there is a parameter {\itshape physical width} and {\itshape physical height} → \hyperlink{structlib_c_z_i_1_1_sub_block_info}{cf. Sub\+Block\+Info}.~\newline
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{CZI_2.PNG}
\doxyfigcaption{C\+ZI -\/ position of sub-\/block on plane}
\end{DoxyImage}
 So the logical\+\_\+rect defines the position (and size) of the sub-\/block on a plane. The physical\+\_\+size gives the width and height of the bitmap contained in the sub-\/block. They may or may not coincide with each other. If they do not coincide, then conceptually the bitmap is to be considered to have a different resolution -\/ so that we do not have a one-\/to-\/one correspondence between a pixel and an increment by 1 on the X-\/ or Y-\/coordinate. This concept is leveraged in order to have a resolution pyramid available in a C\+Z\+I-\/document. 